# 要件定義書と基本設計書の対応確認ガイド

## 📊 要件定義書の標準的な構成と確認方法

### 1. 要件定義書の一般的な項目構成

```markdown
【要件定義書の標準構成】
1. 業務要件
   1.1 現行業務の課題
   1.2 新業務フロー
   1.3 業務改善目標

2. 機能要件
   2.1 機能一覧
   2.2 画面要件
   2.3 帳票要件
   2.4 バッチ処理要件
   2.5 外部インターフェース要件

3. 非機能要件
   3.1 可用性要件
   3.2 性能・拡張性要件
   3.3 運用・保守性要件
   3.4 移行性要件
   3.5 セキュリティ要件
   3.6 システム環境・エコロジー

4. その他の要件
   4.1 プロジェクト要件
   4.2 予算・コスト要件
   4.3 スケジュール要件
```

## 🔄 要件定義→基本設計のトレーサビリティマトリクス

### 基本的な対応表

| 要件定義書の項目 | 基本設計書の対応章 | 確認ポイント |
|-----------------|-------------------|-------------|
| 業務要件 | システム概要<br>機能設計 | 業務フローが実現できる設計か |
| 機能要件 | 機能設計<br>アプリケーション設計 | すべての機能が設計されているか |
| 画面要件 | 画面設計 | 画面遷移、レイアウトが明確か |
| 帳票要件 | 帳票設計 | 出力形式、タイミングが明確か |
| I/F要件 | インターフェース設計<br>データ連携設計 | 連携先、連携方式が明確か |
| 可用性要件 | 非機能要件設計（可用性） | 目標稼働率を満たす設計か |
| 性能要件 | 非機能要件設計（性能）<br>サイジング | レスポンス要件を満たすか |
| セキュリティ要件 | セキュリティ設計 | 必要な対策が網羅されているか |
| 運用要件 | 運用設計 | 運用手順が明確か |
| 移行要件 | 移行計画 | 移行手順、スケジュールが明確か |

## ✅ 確認方法1：チェックリスト方式

### 要件カバレッジチェックリスト

```markdown
## 機能要件チェック
- [ ] 要件定義書の機能一覧表のすべての機能が基本設計に含まれている
- [ ] 各機能の処理フローが記載されている
- [ ] 入出力項目が定義されている
- [ ] エラー処理が定義されている

## 非機能要件チェック
- [ ] 可用性：目標稼働率 99.9% → 冗長化設計あり
- [ ] 性能：レスポンス3秒以内 → 性能設計で実現方法記載
- [ ] バックアップ：RPO 1時間 → バックアップ設計で頻度記載
- [ ] セキュリティ：暗号化必須 → 暗号化設計あり

## インターフェース要件チェック
- [ ] 外部システムA連携 → I/F設計書に記載
- [ ] 外部システムB連携 → I/F設計書に記載
- [ ] ファイル連携 → データ連携設計に記載
```

## 📋 確認方法2：マッピング表方式

### 要件定義書との対応表テンプレート

| 要件ID | 要件概要 | 要件区分 | 基本設計書の記載箇所 | 設計内容 | 確認 |
|--------|---------|---------|---------------------|----------|------|
| FR-001 | ユーザー認証機能 | 機能 | 3.1 認証機能設計 | LDAP認証 | ✓ |
| FR-002 | ファイル共有機能 | 機能 | 3.2 ファイルサービス設計 | FSx利用 | ✓ |
| NFR-001 | 稼働率99.9% | 非機能 | 4.1 可用性設計 | マルチAZ構成 | ✓ |
| NFR-002 | 同時接続100名 | 非機能 | 4.2 性能設計 | サイジング実施 | ✓ |
| SEC-001 | 通信暗号化 | セキュリティ | 5.1 暗号化設計 | TLS1.3使用 | ✓ |
| OPE-001 | 24時間監視 | 運用 | 6.1 監視設計 | CloudWatch | ✓ |

## 🔍 確認方法3：レビュー観点方式

### 段階的レビューでの確認

```markdown
## 第1段階：網羅性の確認
1. 要件定義書の目次と基本設計書の目次を並べる
2. 各要件に対応する設計章があるか確認
3. 不足があれば、なぜ不要なのか理由を明確化

## 第2段階：詳細度の確認
1. 重要な要件（Must要件）から順に確認
2. 要件を実現する具体的な方法が記載されているか
3. 実装者が理解できるレベルまで詳細化されているか

## 第3段階：整合性の確認
1. 要件間の矛盾がないか
2. 実現方法が要件を満たしているか
3. 過剰な設計になっていないか
```

## 💡 FSxハイブリッド構成での確認例

### 要件定義書の内容（例）

```markdown
【機能要件】
- 既存ファイルサーバーの移行
- 1TB以上のストレージ容量
- SMBプロトコルでのアクセス
- 既存のAD認証を利用

【非機能要件】
- 可用性：99.9%
- バックアップ：日次
- 同時接続：200ユーザー
- ネットワーク遅延：10ms以内

【セキュリティ要件】
- 保存データの暗号化
- 通信の暗号化
- アクセスログの取得
```

### 基本設計書での対応確認

```markdown
✅ 機能要件の確認
- 既存ファイルサーバーの移行 → 9章 移行計画に記載
- 1TB以上のストレージ → 3.1 FSx設計（2TB構成）
- SMBプロトコル → 3.2 ファイルアクセス設計
- AD認証 → 4.1 AD連携設計

✅ 非機能要件の確認
- 可用性99.9% → 6.2 可用性設計（マルチAZ）
- 日次バックアップ → 6.3 バックアップ設計
- 200ユーザー → 6.1 性能設計（スループット計算）
- 遅延10ms → 5.1 ネットワーク設計（Direct Connect）

✅ セキュリティ要件の確認
- 保存データ暗号化 → 7.2 暗号化設計（KMS）
- 通信暗号化 → 7.2 暗号化設計（SMB3.0）
- アクセスログ → 7.1 監査ログ設計
```

## 📝 不足を発見した場合の対処

### ケース別対処方法

| 発見された不足 | 対処方法 | 記載例 |
|---------------|---------|--------|
| 要件はあるが設計がない | 設計を追加 | 新しい章/節を追加 |
| 要件が曖昧 | 要件を明確化してから設計 | 前提条件として記載 |
| 要件が過剰 | スコープ外として明記 | 対象外事項に記載 |
| 技術的に実現困難 | 代替案を提示 | 制約事項と代替設計 |

### 対象外事項の記載例

```markdown
## 1.4 対象外事項
以下の要件定義書の項目は、本基本設計の対象外とする：
- 災害復旧サイトの構築（Phase2で実施予定）
- 既存システムBとの連携（現行通り手動運用を継続）
- 帳票出力機能（要件の詳細化待ち）
```

## 🔄 継続的な管理方法

### 変更管理プロセス

```markdown
1. 要件変更が発生
   ↓
2. 影響箇所を特定（マッピング表を使用）
   ↓
3. 基本設計書の該当箇所を修正
   ↓
4. マッピング表を更新
   ↓
5. レビューで確認
```

### バージョン管理

| 版数 | 更新日 | 要件変更内容 | 設計書影響箇所 |
|------|--------|-------------|----------------|
| 1.0 | 2024/01/15 | 初版 | - |
| 1.1 | 2024/02/01 | 性能要件変更（100→200ユーザー） | 6.1 性能設計を修正 |
| 1.2 | 2024/02/15 | バックアップ要件追加 | 6.3 バックアップ設計を追加 |

## ⚡ クイックチェック手順

### 5分でできる簡易確認
1. **要件定義書の要件一覧を用意**
2. **基本設計書の目次と照合**
3. **重要な要件Top10を抽出**
4. **各要件の設計記載箇所を確認**
5. **不明な点をリスト化**

## 📌 よくある見落としポイント

- エラー処理、異常系の設計
- 性能劣化時の対処設計
- データ移行時の切り戻し設計
- 外部システム停止時の設計
- 法規制、コンプライアンス要件
- ライセンス要件
- 教育、マニュアル要件
- 保守契約要件